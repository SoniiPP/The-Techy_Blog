<h2>Dashboard</h2>
<button id="new-post">New Post</button>
{{#each blogPosts}}
  <article>
    <h2>{{this.title}}</h2>
    <p>{{this.content}}</p>
    <p>Posted by {{this.user.username}} on {{this.createdAt}}</p>
    <button class="edit-post" data-id="{{this.id}}">Edit</button>
    <button class="delete-post" data-id="{{this.id}}">Delete</button>
  </article>
{{/each}}

<script>
document.getElementById('new-post').addEventListener('click', () => {
  // Handle new post creation
});

document.querySelectorAll('.edit-post').forEach(button => {
  button.addEventListener('click', async (event) => {
    const id = event.target.getAttribute('data-id');
    // Handle post editing
  });
});

document.querySelectorAll('.delete-post').forEach(button => {
  button.addEventListener('click', async (event) => {
    const id = event.target.getAttribute('data-id');
    const response = await fetch(`/post/${id}`, {
      method: 'DELETE',
    });

    if (response.ok) {
      document.location.replace('/dashboard');
    } else {
      alert('Failed to delete post');
    }
  });
});
</script>
